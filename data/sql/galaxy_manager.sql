CREATE TABLE account (id BIGINT AUTO_INCREMENT NOT NULL, username VARCHAR(255) NOT NULL, username_canonical VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, email_canonical VARCHAR(255) NOT NULL, enabled TINYINT(1) NOT NULL, algorithm VARCHAR(255) NOT NULL, salt VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, last_login DATETIME DEFAULT NULL, locked TINYINT(1) NOT NULL, expired TINYINT(1) NOT NULL, expires_at DATETIME DEFAULT NULL, confirmation_token VARCHAR(255) DEFAULT NULL, password_requested_at DATETIME DEFAULT NULL, roles LONGTEXT NOT NULL COMMENT '(DC2Type:array)', credentials_expired TINYINT(1) NOT NULL, credentials_expire_at DATETIME DEFAULT NULL, UNIQUE INDEX UNIQ_7D3656A492FC23A8 (username_canonical), UNIQUE INDEX UNIQ_7D3656A4A0D96FBF (email_canonical), PRIMARY KEY(id)) ENGINE = InnoDB;
CREATE TABLE account_session (id BIGINT AUTO_INCREMENT NOT NULL, account INT NOT NULL, session_key VARCHAR(100) NOT NULL, PRIMARY KEY(id)) ENGINE = InnoDB;
CREATE TABLE galaxy (id INT AUTO_INCREMENT NOT NULL, primary_id INT DEFAULT NULL, name VARCHAR(100) NOT NULL, version VARCHAR(100) NOT NULL, status INT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX IDX_F6BB137621DE0C6C (primary_id), PRIMARY KEY(id)) ENGINE = InnoDB;
CREATE TABLE service (id INT AUTO_INCREMENT NOT NULL, galaxy_id INT DEFAULT NULL, name VARCHAR(255) NOT NULL, type VARCHAR(255) NOT NULL, address BIGINT NOT NULL, tcp_port INT NOT NULL, udp_port INT NOT NULL, ping_port INT NOT NULL, version INT NOT NULL, status INT NOT NULL, last_pulse NUMERIC(17, 3) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX IDX_E19D9AD2B61FAB2 (galaxy_id), PRIMARY KEY(id)) ENGINE = InnoDB;
ALTER TABLE galaxy ADD CONSTRAINT FK_F6BB137621DE0C6C FOREIGN KEY (primary_id) REFERENCES service(id);
ALTER TABLE service ADD CONSTRAINT FK_E19D9AD2B61FAB2 FOREIGN KEY (galaxy_id) REFERENCES galaxy(id)
